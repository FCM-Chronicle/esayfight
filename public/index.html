<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>역사 정리리</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <!-- 게임 영역 -->
        <div class="game-area">
            <!-- 게임 헤더 -->
            <div class="game-header">
                <div class="game-title">개망갬</div>
                <div class="player-info">
                    <div class="nickname-input">
                        <input type="text" id="nickname" placeholder="닉네임을 입력하세요" maxlength="12">
                        <button id="setNickname">설정</button>
                    </div>
                    <div id="playerName" class="hidden">플레이어: <span id="currentNickname"></span></div>
                </div>
                <div class="connection-status">
                    <span id="connectionStatus" class="disconnected">연결 끊김</span>
                </div>
            </div>

            <!-- 메인 메뉴 -->
            <div id="mainMenu" class="screen">
                <h2>게임 모드 선택</h2>
                <div class="menu-buttons">
                    <button id="joinRoomBtn" class="menu-btn">방 목록</button>
                    <button id="createRoomBtn" class="menu-btn">방 만들기</button>
                    <button id="rankingBtn" class="menu-btn">순위표</button>
                </div>
            </div>

            <!-- 방 목록 -->
            <div id="roomList" class="screen hidden">
                <h2>방 목록</h2>
                <div class="room-controls">
                    <button id="refreshRooms">새로고침</button>
                    <button id="backFromRooms">뒤로가기</button>
                </div>
                <div id="roomsContainer" class="rooms-container">
                    <div class="loading">방 목록을 불러오는 중...</div>
                </div>
            </div>

            <!-- 방 생성 -->
            <div id="createRoom" class="screen hidden">
                <h2>방 만들기</h2>
                <div class="create-room-form">
                    <input type="text" id="roomName" placeholder="방 이름을 입력하세요" maxlength="20">
                    <div class="character-selection">
                        <h3>캐릭터 선택</h3>
                        <div class="characters">
                            <div class="character selected" data-char="1">
                                <div class="char-avatar char-1"></div>
                                <div class="char-name">파랑이</div>
                                <div class="char-type">밸런스형</div>
                                <div class="char-stats">
                                    <div>체력: 100</div>
                                    <div>속도: 10</div>
                                    <div>재장전: 2초</div>
                                </div>
                            </div>
                            <div class="character" data-char="2">
                                <div class="char-avatar char-2"></div>
                                <div class="char-name">빨강이</div>
                                <div class="char-type">민첩형</div>
                                <div class="char-stats">
                                    <div>체력: 70</div>
                                    <div>속도: 15</div>
                                    <div>재장전: 3초</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button id="createRoomBtn2" class="menu-btn">방 생성</button>
                    <button id="backFromCreate" class="menu-btn secondary">뒤로가기</button>
                </div>
            </div>

            <!-- 순위표 -->
            <div id="ranking" class="screen hidden">
                <h2>순위표</h2>
                <div class="ranking-container">
                    <div class="ranking-header">
                        <div>순위</div>
                        <div>닉네임</div>
                        <div>승리 횟수</div>
                    </div>
                    <div id="rankingList" class="ranking-list">
                        <div class="loading">순위를 불러오는 중...</div>
                    </div>
                </div>
                <button id="backFromRanking" class="menu-btn">뒤로가기</button>
            </div>

            <!-- 대기실 -->
            <div id="waitingRoom" class="screen hidden">
                <h2 id="waitingRoomTitle">대기실</h2>
                <div class="waiting-content">
                    <div class="players-info">
                        <div class="player-slot" id="player1Slot">
                            <div class="player-avatar"></div>
                            <div class="player-details">
                                <div class="player-nick">대기중...</div>
                                <div class="player-char">캐릭터 미선택</div>
                                <div class="player-ready">준비 안됨</div>
                            </div>
                        </div>
                        <div class="vs">VS</div>
                        <div class="player-slot" id="player2Slot">
                            <div class="player-avatar"></div>
                            <div class="player-details">
                                <div class="player-nick">대기중...</div>
                                <div class="player-char">캐릭터 미선택</div>
                                <div class="player-ready">준비 안됨</div>
                            </div>
                        </div>
                    </div>
                    <div class="waiting-controls">
                        <div class="character-change">
                            <label>캐릭터 변경:</label>
                            <select id="characterSelect">
                                <option value="1">파랑이 1호 (밸런스형)</option>
                                <option value="2">빨강이 2호 (민첩형)</option>
                            </select>
                        </div>
                        <button id="readyBtn" class="menu-btn">준비</button>
                        <button id="startGameBtn" class="menu-btn hidden">게임 시작</button>
                        <button id="leaveRoomBtn" class="menu-btn secondary">방 나가기</button>
                    </div>
                </div>
            </div>

            <!-- 게임 화면 -->
            <div id="gameScreen" class="screen hidden">
                <div class="game-ui">
                    <div class="player-hud" id="player1HUD">
                        <div class="player-info-hud">
                            <div class="player-name">플레이어 1</div>
                            <div class="health-bar">
                                <div class="health-fill" id="player1Health"></div>
                                <div class="health-text">100/100</div>
                            </div>
                        </div>
                        <div class="bullets" id="player1Bullets">
                            <div class="bullet filled"></div>
                            <div class="bullet filled"></div>
                            <div class="bullet filled"></div>
                        </div>
                        <div class="status" id="player1Status"></div>
                    </div>
                    
                    <div class="game-center">
                        <div class="game-timer" id="gameTimer">0:00</div>
                        <div class="game-status" id="gameStatus">게임 진행 중</div>
                    </div>
                    
                    <div class="player-hud" id="player2HUD">
                        <div class="player-info-hud">
                            <div class="player-name">플레이어 2</div>
                            <div class="health-bar">
                                <div class="health-fill" id="player2Health"></div>
                                <div class="health-text">100/100</div>
                            </div>
                        </div>
                        <div class="bullets" id="player2Bullets">
                            <div class="bullet filled"></div>
                            <div class="bullet filled"></div>
                            <div class="bullet filled"></div>
                        </div>
                        <div class="status" id="player2Status"></div>
                    </div>
                </div>
                
                <canvas id="gameCanvas" width="800" height="600"></canvas>
                
                <div class="game-controls">
                    <div class="control-info">
                        <div>이동: WASD | 공격: 마우스 클릭 | 재장전: R</div>
                        <div id="pingDisplay">핑: --ms</div>
                    </div>
                </div>
            </div>

            <!-- 게임 결과 -->
            <div id="gameResult" class="screen hidden">
                <div class="result-content">
                    <h2 id="resultTitle">게임 결과</h2>
                    <div id="resultMessage"></div>
                    <div id="resultStats" class="result-stats"></div>
                    <div class="result-buttons">
                        <button id="playAgainBtn" class="menu-btn">다시 하기</button>
                        <button id="backToMenuBtn" class="menu-btn secondary">메인 메뉴</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- 채팅 영역 -->
        <div class="chat-area">
            <div class="chat-header">
                <div class="chat-tabs">
                    <button class="chat-tab active" data-tab="all">전체</button>
                    <button class="chat-tab" data-tab="room">방</button>
                </div>
                <div class="online-count">
                    온라인: <span id="onlineCount">0</span>명
                </div>
            </div>
            
            <div class="chat-messages" id="chatMessages">
                <div class="system-message">개망갬에 오신 것을 환영합니다!</div>
                <div class="system-message">서버에 연결 중...</div>
            </div>
            
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="채팅을 입력하세요..." maxlength="100" disabled>
                <button id="sendChat" disabled>전송</button>
            </div>
        </div>
    </div>

    <!-- 로딩 스크린 -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">게임 로딩중...</div>
        </div>
    </div>

    <!-- 에러 알림 -->
    <div id="errorNotification" class="notification error hidden">
        <span id="errorMessage"></span>
        <button id="closeError">&times;</button>
    </div>

    <!-- Socket.IO 클라이언트 -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>
</html>
